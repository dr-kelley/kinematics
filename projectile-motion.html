<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Projectile Motion Simulator</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',
                'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',
                sans-serif;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        input[type="range"] {
            width: 100%;
        }
        input[type="number"] {
            width: 100%;
            padding: 0.25rem;
            border: 1px solid #cbd5e1;
            border-radius: 0.25rem;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // Lucide icons as inline SVG components
        const Play = ({ size = 24 }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <polygon points="5 3 19 12 5 21 5 3"></polygon>
            </svg>
        );

        const Pause = ({ size = 24 }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <rect x="6" y="4" width="4" height="16"></rect>
                <rect x="14" y="4" width="4" height="16"></rect>
            </svg>
        );

        const RotateCcw = ({ size = 24 }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <polyline points="1 4 1 10 7 10"></polyline>
                <path d="M3.51 15a9 9 0 1 0 2.13-9.36L1 10"></path>
            </svg>
        );

        const ProjectileMotionSimulator = () => {
            // Simulation state
            const [isPlaying, setIsPlaying] = useState(false);
            const [time, setTime] = useState(0);
            const [trajectory, setTrajectory] = useState([]);
            const [noAirTrajectory, setNoAirTrajectory] = useState([]);
            const [hasLanded, setHasLanded] = useState(false);
            
            // Initial conditions
            const [v0, setV0] = useState(30); // m/s
            const [angle, setAngle] = useState(45); // degrees
            const [h0, setH0] = useState(0); // initial height in meters
            const [g, setG] = useState(9.8); // m/s^2
            
            // Air resistance
            const [includeAirResistance, setIncludeAirResistance] = useState(false);
            const [compareNoAirResistance, setCompareNoAirResistance] = useState(false);
            const [dragCoeff, setDragCoeff] = useState(0.47); // sphere
            const [area, setArea] = useState(0.01); // m^2
            const [airDensity, setAirDensity] = useState(1.225); // kg/m^3
            const [mass, setMass] = useState(1); // kg
            
            // Presets for air resistance
            const airResistancePresets = [
                { name: "Baseball", C: 0.3, A: 0.00426, rho: 1.225, m: 0.145 },
                { name: "Basketball", C: 0.5, A: 0.0465, rho: 1.225, m: 0.624 },
                { name: "Golf Ball", C: 0.47, A: 0.00143, rho: 1.225, m: 0.046 },
                { name: "Cannonball", C: 0.47, A: 0.0314, rho: 1.225, m: 10 }
            ];
            
            // Results
            const [results, setResults] = useState(null);
            
            const animationRef = useRef(null);
            const startTimeRef = useRef(null);
            const dt = 0.016; // ~60fps
            
            // Calculate trajectory using numerical integration
            const calculateTrajectory = (useAirResistance = false) => {
                const angleRad = angle * Math.PI / 180;
                const vx0 = v0 * Math.cos(angleRad);
                const vy0 = v0 * Math.sin(angleRad);
                
                let t = 0;
                let x = 0;
                let y = h0;
                let vx = vx0;
                let vy = vy0;
                const trajectoryData = [{t: 0, x: 0, y: h0, vx: vx0, vy: vy0}];
                
                const timeStep = 0.01; // smaller step for accuracy
                const maxTime = 30; // safety limit
                
                while (y >= 0 && t < maxTime) {
                    // Calculate forces
                    let ax = 0;
                    let ay = -g;
                    
                    if (useAirResistance) {
                        const v = Math.sqrt(vx * vx + vy * vy);
                        const dragForce = 0.5 * airDensity * dragCoeff * area * v * v;
                        const dragAccel = dragForce / mass;
                        
                        // Drag opposes velocity
                        if (v > 0) {
                            ax = -dragAccel * (vx / v);
                            ay = -g - dragAccel * (vy / v);
                        }
                    }
                    
                    // Update velocity and position (Euler method)
                    vx += ax * timeStep;
                    vy += ay * timeStep;
                    x += vx * timeStep;
                    y += vy * timeStep;
                    t += timeStep;
                    
                    trajectoryData.push({t, x, y, vx, vy});
                    
                    // Stop if we've clearly landed
                    if (y < 0) break;
                }
                
                // Calculate final results (only for the main trajectory with air resistance setting)
                if (useAirResistance === includeAirResistance) {
                    const finalPoint = trajectoryData[trajectoryData.length - 1];
                    
                    // Interpolate to find exact landing point
                    const secondToLast = trajectoryData[trajectoryData.length - 2];
                    const fraction = -secondToLast.y / (finalPoint.y - secondToLast.y);
                    const landingX = secondToLast.x + fraction * (finalPoint.x - secondToLast.x);
                    const landingT = secondToLast.t + fraction * (finalPoint.t - secondToLast.t);
                    const landingVx = secondToLast.vx + fraction * (finalPoint.vx - secondToLast.vx);
                    const landingVy = secondToLast.vy + fraction * (finalPoint.vy - secondToLast.vy);
                    
                    const impactSpeed = Math.sqrt(landingVx * landingVx + landingVy * landingVy);
                    const impactAngle = Math.atan2(-landingVy, landingVx) * 180 / Math.PI;
                    const maxHeight = Math.max(...trajectoryData.map(p => p.y));
                    
                    setResults({
                        range: landingX,
                        timeOfFlight: landingT,
                        impactVelocity: impactSpeed,
                        impactAngle: impactAngle,
                        maxHeight: maxHeight
                    });
                }
                
                return trajectoryData;
            };
            
            // Handle simulation
            useEffect(() => {
                if (isPlaying && !hasLanded) {
                    animationRef.current = requestAnimationFrame((timestamp) => {
                        if (!startTimeRef.current) startTimeRef.current = timestamp;
                        
                        const newTime = time + dt;
                        setTime(newTime);
                        startTimeRef.current = timestamp;
                    });
                } else if (!isPlaying) {
                    startTimeRef.current = null;
                }
                
                return () => {
                    if (animationRef.current) {
                        cancelAnimationFrame(animationRef.current);
                    }
                };
            }, [isPlaying, time, hasLanded]);
            
            // Update trajectory when simulation state changes
            useEffect(() => {
                const fullTrajectory = calculateTrajectory(includeAirResistance);
                setTrajectory(fullTrajectory);
                
                // Calculate no air resistance trajectory if comparison is enabled
                if (includeAirResistance && compareNoAirResistance) {
                    const noAirTraj = calculateTrajectory(false);
                    setNoAirTrajectory(noAirTraj);
                } else {
                    setNoAirTrajectory([]);
                }
                
                // Check if we've landed
                if (fullTrajectory.length > 0) {
                    const currentIndex = Math.floor(time / 0.01);
                    if (currentIndex >= fullTrajectory.length - 1) {
                        setHasLanded(true);
                        setIsPlaying(false);
                    }
                }
            }, [time]);
            
            const handleReset = () => {
                setIsPlaying(false);
                setTime(0);
                setHasLanded(false);
                startTimeRef.current = null;
                const fullTrajectory = calculateTrajectory(includeAirResistance);
                setTrajectory(fullTrajectory);
                
                // Calculate no air resistance trajectory if comparison is enabled
                if (includeAirResistance && compareNoAirResistance) {
                    const noAirTraj = calculateTrajectory(false);
                    setNoAirTrajectory(noAirTraj);
                } else {
                    setNoAirTrajectory([]);
                }
            };
            
            const togglePlay = () => {
                if (hasLanded) {
                    handleReset();
                    setIsPlaying(true);
                } else {
                    setIsPlaying(!isPlaying);
                }
            };
            
            const handleParameterChange = () => {
                handleReset();
            };
            
            const applyPreset = (preset) => {
                setDragCoeff(preset.C);
                setArea(preset.A);
                setAirDensity(preset.rho);
                setMass(preset.m);
                handleReset();
            };
            
            // Get current position
            const getCurrentPosition = () => {
                if (trajectory.length === 0) return { x: 0, y: h0 };
                const currentIndex = Math.floor(time / 0.01);
                if (currentIndex >= trajectory.length) {
                    return trajectory[trajectory.length - 1];
                }
                return trajectory[currentIndex];
            };
            
            const currentPos = getCurrentPosition();
            
            // Calculate display bounds - round to nearest 5
            const roundToNearest5 = (val) => Math.ceil(val / 5) * 5;
            
            // Find max range from both trajectories if comparing
            let maxRangeForDisplay = results ? results.range * 1.1 : 100;
            if (noAirTrajectory.length > 0) {
                const noAirMaxX = Math.max(...noAirTrajectory.map(p => p.x));
                maxRangeForDisplay = Math.max(maxRangeForDisplay, noAirMaxX * 1.1);
            }
            
            // Find max height from both trajectories if comparing
            let maxHeightForDisplay = results ? results.maxHeight * 1.2 : h0 + 20;
            if (noAirTrajectory.length > 0) {
                const noAirMaxY = Math.max(...noAirTrajectory.map(p => p.y));
                maxHeightForDisplay = Math.max(maxHeightForDisplay, noAirMaxY * 1.2);
            }
            
            const maxXRaw = Math.max(maxRangeForDisplay, 50);
            const maxYRaw = Math.max(maxHeightForDisplay, h0 + 20);
            const maxX = roundToNearest5(maxXRaw);
            const maxY = roundToNearest5(maxYRaw);
            
            // Graph dimensions
            const graphWidth = 500;
            const graphHeight = 350;
            const margin = { top: 20, right: 30, bottom: 40, left: 50 };
            const plotWidth = graphWidth - margin.left - margin.right;
            const plotHeight = graphHeight - margin.top - margin.bottom;
            
            const scaleX = (x) => (x / maxX) * plotWidth;
            const scaleY = (y) => plotHeight - (y / maxY) * plotHeight;
            
            return (
                <div className="w-full max-w-7xl mx-auto p-6 bg-gradient-to-br from-blue-50 to-indigo-50">
                    <div className="bg-white rounded-lg shadow-lg p-6 mb-4">
                        <h1 className="text-3xl font-bold text-center mb-2 text-indigo-900">
                            Projectile Motion Simulator
                        </h1>
                        <p className="text-center text-gray-600 text-sm">
                            Explore trajectories with and without air resistance
                        </p>
                    </div>
                    
                    <div className="grid grid-cols-1 lg:grid-cols-12 gap-6">
                        {/* Left: Controls */}
                        <div className="lg:col-span-3 bg-white rounded-lg shadow-lg p-6">
                            <h2 className="text-xl font-semibold mb-4 text-indigo-800">
                                Initial Conditions
                            </h2>
                            
                            {/* Controls - moved to top */}
                            <div className="flex justify-center gap-3 mb-4 pb-4 border-b">
                                <button
                                    onClick={togglePlay}
                                    className="flex items-center gap-2 px-6 py-3 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors font-semibold shadow"
                                >
                                    {isPlaying ? <Pause size={20} /> : <Play size={20} />}
                                    {isPlaying ? 'Pause' : hasLanded ? 'Restart' : 'Launch'}
                                </button>
                                <button
                                    onClick={handleReset}
                                    className="flex items-center gap-2 px-6 py-3 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors font-semibold shadow"
                                >
                                    <RotateCcw size={20} />
                                    Reset
                                </button>
                            </div>
                            
                            <div className="space-y-4">
                                {/* Initial Velocity */}
                                <div>
                                    <label className="block text-sm font-medium text-gray-700 mb-1">
                                        Initial Velocity: {v0.toFixed(1)} m/s
                                    </label>
                                    <input
                                        type="range"
                                        min="5"
                                        max="100"
                                        step="0.5"
                                        value={v0}
                                        onChange={(e) => { setV0(parseFloat(e.target.value)); handleParameterChange(); }}
                                        className="w-full"
                                    />
                                </div>
                                
                                {/* Launch Angle */}
                                <div>
                                    <label className="block text-sm font-medium text-gray-700 mb-1">
                                        Launch Angle: {angle.toFixed(1)}°
                                    </label>
                                    <input
                                        type="range"
                                        min="0"
                                        max="90"
                                        step="1"
                                        value={angle}
                                        onChange={(e) => { setAngle(parseFloat(e.target.value)); handleParameterChange(); }}
                                        className="w-full"
                                    />
                                </div>
                                
                                {/* Initial Height */}
                                <div>
                                    <label className="block text-sm font-medium text-gray-700 mb-1">
                                        Initial Height: {h0.toFixed(1)} m
                                    </label>
                                    <input
                                        type="range"
                                        min="0"
                                        max="50"
                                        step="0.5"
                                        value={h0}
                                        onChange={(e) => { setH0(parseFloat(e.target.value)); handleParameterChange(); }}
                                        className="w-full"
                                    />
                                </div>
                                
                                {/* Gravity */}
                                <div>
                                    <label className="block text-sm font-medium text-gray-700 mb-1">
                                        Gravity: {g.toFixed(2)} m/s²
                                    </label>
                                    <input
                                        type="range"
                                        min="0.5"
                                        max="20"
                                        step="0.1"
                                        value={g}
                                        onChange={(e) => { setG(parseFloat(e.target.value)); handleParameterChange(); }}
                                        className="w-full"
                                    />
                                </div>
                                
                                {/* Air Resistance Checkbox */}
                                <div className="border-t pt-4">
                                    <label className="flex items-center space-x-2 cursor-pointer">
                                        <input
                                            type="checkbox"
                                            checked={includeAirResistance}
                                            onChange={(e) => { setIncludeAirResistance(e.target.checked); handleParameterChange(); }}
                                            className="w-4 h-4"
                                        />
                                        <span className="text-sm font-medium text-gray-700">Include Air Resistance (F = ½ρCAv²)</span>
                                    </label>
                                    
                                    {/* Compare to no air resistance */}
                                    {includeAirResistance && (
                                        <label className="flex items-center space-x-2 cursor-pointer mt-2 ml-6">
                                            <input
                                                type="checkbox"
                                                checked={compareNoAirResistance}
                                                onChange={(e) => { setCompareNoAirResistance(e.target.checked); handleParameterChange(); }}
                                                className="w-4 h-4"
                                            />
                                            <span className="text-sm text-gray-600">Compare to no air resistance</span>
                                        </label>
                                    )}
                                </div>
                                
                                {/* Air Resistance Parameters */}
                                {includeAirResistance && (
                                    <div className="bg-gray-50 p-4 rounded-lg space-y-3">
                                        <h3 className="text-sm font-semibold text-gray-800 mb-2">Air Resistance Parameters</h3>
                                        
                                        {/* Presets */}
                                        <div>
                                            <label className="block text-xs font-medium text-gray-600 mb-1">Presets:</label>
                                            <div className="grid grid-cols-2 gap-2">
                                                {airResistancePresets.map((preset, idx) => (
                                                    <button
                                                        key={idx}
                                                        onClick={() => applyPreset(preset)}
                                                        className="px-2 py-1 text-xs bg-indigo-100 hover:bg-indigo-200 rounded transition-colors"
                                                    >
                                                        {preset.name}
                                                    </button>
                                                ))}
                                            </div>
                                        </div>
                                        
                                        {/* Drag Coefficient */}
                                        <div>
                                            <label className="block text-xs font-medium text-gray-600 mb-1">
                                                Drag Coefficient (C): {dragCoeff.toFixed(2)}
                                            </label>
                                            <input
                                                type="number"
                                                min="0.01"
                                                max="2"
                                                step="0.01"
                                                value={dragCoeff}
                                                onChange={(e) => { setDragCoeff(parseFloat(e.target.value)); handleParameterChange(); }}
                                                className="text-xs"
                                            />
                                        </div>
                                        
                                        {/* Cross-sectional Area */}
                                        <div>
                                            <label className="block text-xs font-medium text-gray-600 mb-1">
                                                Cross-sectional Area (A): {area.toFixed(4)} m²
                                            </label>
                                            <input
                                                type="number"
                                                min="0.0001"
                                                max="1"
                                                step="0.0001"
                                                value={area}
                                                onChange={(e) => { setArea(parseFloat(e.target.value)); handleParameterChange(); }}
                                                className="text-xs"
                                            />
                                        </div>
                                        
                                        {/* Air Density */}
                                        <div>
                                            <label className="block text-xs font-medium text-gray-600 mb-1">
                                                Air Density (ρ): {airDensity.toFixed(3)} kg/m³
                                            </label>
                                            <input
                                                type="number"
                                                min="0.1"
                                                max="10"
                                                step="0.001"
                                                value={airDensity}
                                                onChange={(e) => { setAirDensity(parseFloat(e.target.value)); handleParameterChange(); }}
                                                className="text-xs"
                                            />
                                        </div>
                                        
                                        {/* Mass */}
                                        <div>
                                            <label className="block text-xs font-medium text-gray-600 mb-1">
                                                Mass (m): {mass.toFixed(3)} kg
                                            </label>
                                            <input
                                                type="number"
                                                min="0.001"
                                                max="100"
                                                step="0.001"
                                                value={mass}
                                                onChange={(e) => { setMass(parseFloat(e.target.value)); handleParameterChange(); }}
                                                className="text-xs"
                                            />
                                        </div>
                                    </div>
                                )}
                            </div>
                        </div>
                        
                        {/* Middle: Trajectory Visualization */}
                        <div className="lg:col-span-5 bg-white rounded-lg shadow-lg p-6">
                            <h2 className="text-xl font-semibold mb-4 text-center text-indigo-800">
                                Trajectory
                            </h2>
                            
                            <svg width={graphWidth} height={graphHeight} className="border border-gray-200 rounded">
                                <g transform={`translate(${margin.left},${margin.top})`}>
                                    {/* Axes */}
                                    <line x1="0" y1={plotHeight} x2={plotWidth} y2={plotHeight} stroke="#333" strokeWidth="2" />
                                    <line x1="0" y1="0" x2="0" y2={plotHeight} stroke="#333" strokeWidth="2" />
                                    
                                    {/* Grid */}
                                    {(() => {
                                        const gridLines = [];
                                        // Vertical grid lines (every 5 meters in x)
                                        const numXTicks = Math.floor(maxX / 5);
                                        for (let i = 0; i <= numXTicks; i++) {
                                            const val = i * 5;
                                            const frac = val / maxX;
                                            if (frac <= 1) {
                                                gridLines.push(
                                                    <line
                                                        key={`gridx-${i}`}
                                                        x1={frac * plotWidth}
                                                        y1="0"
                                                        x2={frac * plotWidth}
                                                        y2={plotHeight}
                                                        stroke="#e5e7eb"
                                                        strokeWidth="1"
                                                    />
                                                );
                                            }
                                        }
                                        // Horizontal grid lines (every 5 meters in y)
                                        const numYTicks = Math.floor(maxY / 5);
                                        for (let i = 0; i <= numYTicks; i++) {
                                            const val = i * 5;
                                            const frac = val / maxY;
                                            if (frac <= 1) {
                                                gridLines.push(
                                                    <line
                                                        key={`gridy-${i}`}
                                                        x1="0"
                                                        y1={(1 - frac) * plotHeight}
                                                        x2={plotWidth}
                                                        y2={(1 - frac) * plotHeight}
                                                        stroke="#e5e7eb"
                                                        strokeWidth="1"
                                                    />
                                                );
                                            }
                                        }
                                        return gridLines;
                                    })()}
                                    
                                    {/* X-axis labels */}
                                    {(() => {
                                        // Determine increment - aim for 5-7 labels total
                                        let increment = 5;
                                        if (maxX > 400) increment = 100;
                                        else if (maxX > 200) increment = 50;
                                        else if (maxX > 120) increment = 25;
                                        else if (maxX > 50) increment = 10;
                                        
                                        const ticks = [];
                                        for (let val = 0; val <= maxX; val += increment) {
                                            const frac = val / maxX;
                                            if (frac <= 1) {
                                                ticks.push(
                                                    <text
                                                        key={`xlabel-${val}`}
                                                        x={frac * plotWidth}
                                                        y={plotHeight + 25}
                                                        fontSize="10"
                                                        textAnchor="middle"
                                                        fill="#666"
                                                    >
                                                        {val}m
                                                    </text>
                                                );
                                            }
                                        }
                                        return ticks;
                                    })()}
                                    
                                    {/* Y-axis labels */}
                                    {(() => {
                                        // Determine increment - aim for 5-7 labels total
                                        let increment = 5;
                                        if (maxY > 200) increment = 50;
                                        else if (maxY > 120) increment = 25;
                                        else if (maxY > 50) increment = 10;
                                        
                                        const ticks = [];
                                        for (let val = 0; val <= maxY; val += increment) {
                                            const frac = val / maxY;
                                            if (frac <= 1) {
                                                ticks.push(
                                                    <text
                                                        key={`ylabel-${val}`}
                                                        x="-10"
                                                        y={(1 - frac) * plotHeight + 4}
                                                        fontSize="10"
                                                        textAnchor="end"
                                                        fill="#666"
                                                    >
                                                        {val}m
                                                    </text>
                                                );
                                            }
                                        }
                                        return ticks;
                                    })()}
                                    
                                    {/* Axis labels */}
                                    <text x={plotWidth / 2} y={plotHeight + 38} fontSize="12" textAnchor="middle" fill="#333" fontWeight="bold">
                                        Horizontal Distance (m)
                                    </text>
                                    <text
                                        x="-35"
                                        y={plotHeight / 2}
                                        fontSize="12"
                                        textAnchor="middle"
                                        fill="#333"
                                        fontWeight="bold"
                                        transform={`rotate(-90, -35, ${plotHeight / 2})`}
                                    >
                                        Height (m)
                                    </text>
                                    
                                    {/* Full trajectory path */}
                                    {trajectory.length > 1 && (
                                        <path
                                            d={trajectory.map((p, i) => 
                                                `${i === 0 ? 'M' : 'L'} ${scaleX(p.x)} ${scaleY(p.y)}`
                                            ).join(' ')}
                                            fill="none"
                                            stroke="#94a3b8"
                                            strokeWidth="1.5"
                                            strokeDasharray="4,4"
                                        />
                                    )}
                                    
                                    {/* No air resistance comparison trajectory */}
                                    {noAirTrajectory.length > 1 && (
                                        <path
                                            d={noAirTrajectory.map((p, i) => 
                                                `${i === 0 ? 'M' : 'L'} ${scaleX(p.x)} ${scaleY(p.y)}`
                                            ).join(' ')}
                                            fill="none"
                                            stroke="#10b981"
                                            strokeWidth="1.5"
                                            strokeDasharray="4,4"
                                        />
                                    )}
                                    
                                    {/* Traveled path */}
                                    {trajectory.length > 1 && time > 0 && (
                                        <path
                                            d={trajectory.slice(0, Math.floor(time / 0.01) + 1).map((p, i) => 
                                                `${i === 0 ? 'M' : 'L'} ${scaleX(p.x)} ${scaleY(p.y)}`
                                            ).join(' ')}
                                            fill="none"
                                            stroke="#3b82f6"
                                            strokeWidth="2.5"
                                        />
                                    )}
                                    
                                    {/* Current projectile */}
                                    <circle
                                        cx={scaleX(currentPos.x)}
                                        cy={scaleY(currentPos.y)}
                                        r="6"
                                        fill="#ef4444"
                                        stroke="white"
                                        strokeWidth="2"
                                    />
                                </g>
                            </svg>
                            
                            {/* Current status */}
                            <div className="mt-4 p-3 bg-gray-50 rounded text-sm font-mono">
                                <div className="grid grid-cols-2 gap-2">
                                    <div>Time: {time.toFixed(2)} s</div>
                                    <div>x: {currentPos.x.toFixed(2)} m</div>
                                    <div>y: {currentPos.y.toFixed(2)} m</div>
                                    <div>v: {currentPos.vx !== undefined ? 
                                        Math.sqrt(currentPos.vx**2 + currentPos.vy**2).toFixed(2) : '0.00'} m/s
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        {/* Right: Results */}
                        <div className="lg:col-span-4 bg-white rounded-lg shadow-lg p-6">
                            <h2 className="text-xl font-semibold mb-4 text-center text-indigo-800">
                                Results
                            </h2>
                            
                            {results && (
                                <div className="space-y-4">
                                    <div className="bg-gradient-to-r from-blue-50 to-indigo-50 p-4 rounded-lg">
                                        <h3 className="text-sm font-semibold text-indigo-900 mb-3">Flight Characteristics</h3>
                                        <div className="space-y-2 text-sm">
                                            <div className="flex justify-between items-center">
                                                <span className="text-gray-700">Range:</span>
                                                <span className="font-bold text-indigo-900">{results.range.toFixed(2)} m</span>
                                            </div>
                                            <div className="flex justify-between items-center">
                                                <span className="text-gray-700">Time of Flight:</span>
                                                <span className="font-bold text-indigo-900">{results.timeOfFlight.toFixed(2)} s</span>
                                            </div>
                                            <div className="flex justify-between items-center">
                                                <span className="text-gray-700">Max Height:</span>
                                                <span className="font-bold text-indigo-900">{results.maxHeight.toFixed(2)} m</span>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div className="bg-gradient-to-r from-red-50 to-orange-50 p-4 rounded-lg">
                                        <h3 className="text-sm font-semibold text-red-900 mb-3">Impact Conditions</h3>
                                        <div className="space-y-2 text-sm">
                                            <div className="flex justify-between items-center">
                                                <span className="text-gray-700">Impact Velocity:</span>
                                                <span className="font-bold text-red-900">{results.impactVelocity.toFixed(2)} m/s</span>
                                            </div>
                                            <div className="flex justify-between items-center">
                                                <span className="text-gray-700">Impact Angle:</span>
                                                <span className="font-bold text-red-900">{results.impactAngle.toFixed(1)}° below horizontal</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            )}
                            
                            {!results && (
                                <div className="text-center text-gray-500 py-8">
                                    <p>Launch the projectile to see results</p>
                                </div>
                            )}
                            
                            {/* Legends */}
                            <div className="mt-6 pt-4 border-t">
                                <h3 className="text-sm font-semibold text-gray-700 mb-2">Legend</h3>
                                <div className="space-y-2 text-xs">
                                    <div className="flex items-center gap-2">
                                        <div className="w-8 h-0.5 bg-gray-400" style={{borderStyle: 'dashed'}}></div>
                                        <span>Full trajectory path</span>
                                    </div>
                                    {noAirTrajectory.length > 0 && (
                                        <div className="flex items-center gap-2">
                                            <div className="w-8 h-0.5 bg-green-500" style={{borderStyle: 'dashed'}}></div>
                                            <span>No air resistance path</span>
                                        </div>
                                    )}
                                    <div className="flex items-center gap-2">
                                        <div className="w-8 h-0.5 bg-blue-500"></div>
                                        <span>Traveled path</span>
                                    </div>
                                    <div className="flex items-center gap-2">
                                        <div className="w-3 h-3 bg-red-500 rounded-full"></div>
                                        <span>Projectile</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    {/* Educational notes */}
                    <div className="mt-6 bg-white rounded-lg shadow-lg p-6">
                        <h2 className="text-xl font-semibold mb-4 text-indigo-800">Key Concepts</h2>
                        <div className="grid md:grid-cols-2 gap-6 text-sm text-gray-700">
                            <div>
                                <h3 className="font-semibold text-indigo-900 mb-2">Without Air Resistance:</h3>
                                <ul className="space-y-1 list-disc list-inside">
                                    <li>Horizontal velocity remains constant</li>
                                    <li>Vertical motion follows y = y₀ + v₀ᵧt - ½gt²</li>
                                    <li>Trajectory is a perfect parabola</li>
                                    <li>Maximum range at 45° (level ground)</li>
                                    <li>Time up equals time down (from same height)</li>
                                    <li>Impact speed equals launch speed (level ground)</li>
                                </ul>
                            </div>
                            <div>
                                <h3 className="font-semibold text-indigo-900 mb-2">With Air Resistance (F_drag = ½ρCAv²):</h3>
                                <ul className="space-y-1 list-disc list-inside">
                                    <li>Both horizontal and vertical velocities decrease</li>
                                    <li>Trajectory is no longer symmetric</li>
                                    <li>Steeper descent than ascent</li>
                                    <li>Optimal angle shifts below 45°</li>
                                    <li>Range and max height significantly reduced</li>
                                    <li>Effect increases with projectile speed</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        // Render the app
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<ProjectileMotionSimulator />);
    </script>
</body>
</html>
